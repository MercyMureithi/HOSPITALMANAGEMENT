<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HMS College Project Dashboard - Full Database Integration</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1600px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 30px; text-align: center; position: relative; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.2em; opacity: 0.9; }
        .status-bar { background: rgba(255,255,255,0.1); padding: 15px; margin-top: 20px; border-radius: 10px; display: flex; justify-content: space-around; flex-wrap: wrap; }
        .status-item { text-align: center; padding: 10px; }
        .status-value { font-size: 1.5em; font-weight: bold; color: #3498db; }
        .status-label { font-size: 0.9em; opacity: 0.8; }
        .nav-tabs { display: flex; background: #f8f9fa; border-bottom: 2px solid #e9ecef; overflow-x: auto; }
        .nav-tab { padding: 15px 25px; cursor: pointer; border: none; background: none; font-size: 1em; transition: all 0.3s ease; white-space: nowrap; }
        .nav-tab:hover { background: #e9ecef; }
        .nav-tab.active { background: #3498db; color: white; }
        .content { padding: 40px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .section { margin-bottom: 40px; }
        .section h2 { color: #2c3e50; margin-bottom: 20px; font-size: 1.8em; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .form-section, .list-section { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 10px; padding: 25px; }
        .form-section h3, .list-section h3 { color: #495057; margin-bottom: 20px; font-size: 1.4em; }
        .input-group { margin: 15px 0; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #495057; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 5px; font-family: "Segoe UI", sans-serif; font-size: 14px; transition: border-color 0.3s ease; }
        .input-group input:focus, .input-group select:focus, .input-group textarea:focus { outline: none; border-color: #3498db; box-shadow: 0 0 0 2px rgba(52,152,219,0.2); }
        .btn { background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1em; transition: all 0.3s ease; text-decoration: none; display: inline-block; margin: 5px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(52,152,219,0.4); }
        .btn:disabled { background: #6c757d; cursor: not-allowed; transform: none; box-shadow: none; }
        .btn-success { background: linear-gradient(135deg, #27ae60 0%, #229954 100%); }
        .btn-danger { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .btn-warning { background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .data-table th, .data-table td { padding: 12px; text-align: left; border-bottom: 1px solid #dee2e6; }
        .data-table th { background: #3498db; color: white; font-weight: bold; }
        .data-table tr:hover { background: #f8f9fa; }
        .response-area { background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 8px; font-family: "Courier New", monospace; min-height: 200px; margin-top: 20px; white-space: pre-wrap; max-height: 400px; overflow-y: auto; }
        .success-message { background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #c3e6cb; }
        .error-message { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #f5c6cb; }
        .info-message { background: #d1ecf1; color: #0c5460; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #bee5eb; }
        .empty-state { text-align: center; padding: 40px; color: #6c757d; }
        .card { background: white; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; }
        .badge-success { background: #28a745; color: white; }
        .badge-info { background: #17a2b8; color: white; }
        .footer { background: #34495e; color: white; text-align: center; padding: 20px; margin-top: 40px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Hospital Management System</h1>
            <p>Full Database Integration - Interactive Doctor & Patient Management</p>
            <div class="status-bar">
                <div class="status-item"><div class="status-value" id="serverStatus">üü°</div><div class="status-label">Server Status</div></div>
                <div class="status-item"><div class="status-value" id="doctorCount">0</div><div class="status-label">Total Doctors</div></div>
                <div class="status-item"><div class="status-value" id="patientCount">0</div><div class="status-label">Total Patients</div></div>
                <div class="status-item"><div class="status-value" id="responseTime">--ms</div><div class="status-label">Response Time</div></div>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 15px; margin-top: 15px; border-radius: 10px; text-align: center;">
                <a href="https://wanjiraphilip90-1511552.postman.co/workspace/Mercy-Philip's-Workspace~569ecba7-fd34-4880-8c0b-c6cc7d929c9e/collection/50352287-5b45d528-eed0-479e-ab77-f410f8790a7a?sideView=agentMode" target="_blank" class="btn btn-success" style="margin: 5px;">üöÄ Your Postman Workspace</a>
                <a href="http://localhost:8081/h2-console" target="_blank" class="btn btn-warning" style="margin: 5px;">üóÑÔ∏è H2 Database Console</a>
                <a href="login.html" class="btn" style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); margin: 5px;">üë§ Patient Login</a>
            </div>
        </div>
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">üìä Overview</button>
            <button class="nav-tab" onclick="showTab('doctors')">üë®‚Äç‚öïÔ∏è Doctors</button>
            <button class="nav-tab" onclick="showTab('patients')">üë©‚Äç‚öïÔ∏è Patients</button>
            <button class="nav-tab" onclick="showTab('database')">üóÑÔ∏è Database</button>
            <button class="nav-tab" onclick="showTab('postman')">üìÆ Postman</button>
        </div>
        <div class="content">
            <div id="overview" class="tab-content active">
                <div class="section">
                    <h2>üéØ Project Overview</h2>
                    <div id="connectionStatus" class="error-message"><strong>üîÑ Testing connection to HMS API...</strong><br>Please wait while we check the server status...</div>
                    <div class="data-grid">
                        <div class="card"><div class="card-title">üîç System Health</div><span class="badge badge-info">Live</span><br><br><button class="btn" onclick="testAPI('GET', '/api/v1/auth/status')">Check Health</button><button class="btn btn-success" onclick="refreshAllData()">Refresh All Data</button></div>
                        <div class="card"><div class="card-title">üóÑÔ∏è Database Console</div><span class="badge badge-success">Available</span><br><br><a href="http://localhost:8080/h2-console" target="_blank" class="btn btn-success">Open H2 Console</a><button class="btn btn-warning" onclick="showDatabaseInfo()">Show DB Info</button></div>
                    </div>
                </div>
            </div>
            <div id="doctors" class="tab-content">
                <div class="section">
                    <h2>üë®‚Äç‚öïÔ∏è Doctor Management</h2>
                    <div class="data-grid">
                        <div class="form-section">
                            <h3>‚ûï Add New Doctor</h3>
                            <form id="doctorForm" onsubmit="addDoctor(event)">
                                <div class="input-group"><label for="doctorName">Doctor Name *</label><input type="text" id="doctorName" required placeholder="Dr. John Smith"></div>
                                <div class="input-group"><label for="doctorSpecialty">Specialty *</label><select id="doctorSpecialty" required><option value="">Select Specialty</option><option value="Cardiology">Cardiology</option><option value="Neurology">Neurology</option><option value="Pediatrics">Pediatrics</option><option value="Orthopedics">Orthopedics</option><option value="General Medicine">General Medicine</option></select></div>
                                <div class="input-group"><label for="doctorLicense">License Number *</label><input type="text" id="doctorLicense" required placeholder="MED12345"></div>
                                <div class="input-group"><label for="doctorExperience">Years of Experience</label><input type="number" id="doctorExperience" min="0" max="50" value="5"></div>
                                <button type="submit" class="btn btn-success">‚ûï Add Doctor</button><button type="button" class="btn btn-warning" onclick="clearDoctorForm()">Clear Form</button>
                            </form>
                        </div>
                        <div class="list-section">
                            <h3>üìã Doctors List</h3>
                            <button class="btn" onclick="loadDoctors()">üîÑ Refresh Doctors</button>
                            <div id="doctorsList"><div class="empty-state"><h4>No doctors loaded yet</h4><p>Click "Refresh Doctors" to load data from database</p></div></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="patients" class="tab-content">
                <div class="section">
                    <h2>üë©‚Äç‚öïÔ∏è Patient Management</h2>
                    <div class="data-grid">
                        <div class="form-section">
                            <h3>‚ûï Add New Patient</h3>
                            <form id="patientForm" onsubmit="addPatient(event)">
                                <div class="input-group"><label for="patientName">Patient Name *</label><input type="text" id="patientName" required placeholder="Jane Doe"></div>
                                <div class="input-group"><label for="patientEmail">Email *</label><input type="email" id="patientEmail" required placeholder="jane.doe@email.com"></div>
                                <div class="input-group"><label for="patientPhone">Phone *</label><input type="tel" id="patientPhone" required placeholder="+1234567890"></div>
                                <div class="input-group"><label for="patientDOB">Date of Birth</label><input type="date" id="patientDOB"></div>
                                <div class="input-group"><label for="patientHistory">Medical History</label><textarea id="patientHistory" placeholder="Patient medical history and notes..."></textarea></div>
                                <button type="submit" class="btn btn-success">‚ûï Add Patient</button><button type="button" class="btn btn-warning" onclick="clearPatientForm()">Clear Form</button>
                            </form>
                        </div>
                        <div class="list-section">
                            <h3>üìã Patients List</h3>
                            <button class="btn" onclick="loadPatients()">üîÑ Refresh Patients</button>
                            <div id="patientsList"><div class="empty-state"><h4>No patients loaded yet</h4><p>Click "Refresh Patients" to load data from database</p></div></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="database" class="tab-content">
                <div class="section">
                    <h2>üóÑÔ∏è Database Console</h2>
                    <p>Access the H2 Database Console to view and manage your data:</p>
                    <div class="card">
                        <h4>üîë Database Connection Details:</h4>
                        <div><strong>JDBC URL:</strong> jdbc:h2:mem:hospitaldb</div>
                        <div><strong>Username:</strong> sa</div>
                        <div><strong>Password:</strong> (leave blank)</div>
                        <div><strong>Driver:</strong> org.h2.Driver</div>
                    </div>
                    <a href="http://localhost:8080/h2-console" target="_blank" class="btn btn-success">üöÄ Open H2 Console</a>
                </div>
            </div>
            <div id="postman" class="tab-content">
                <div class="section">
                    <h2>üìÆ Postman Collection</h2>
                    <div class="card">
                        <h4>üì• How to Import Postman Collection:</h4>
                        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <h5>üåê Option 1: Online Workspace (Recommended)</h5>
                            <p><strong>Your Personal Postman Workspace:</strong></p>
                            <a href="https://wanjiriphilip90-1511552.postman.co/workspace/Mercy-Philip's-Workspace~569ecba7-fd34-4880-8c0b-c6cc7d929c9e/collection/50352287-5b45d528-eed0-479e-ab77-f410f8790a7a?sideView=agentMode" target="_blank" class="btn btn-success">üöÄ Open Your Postman Workspace</a>
                            <p style="margin-top: 10px; font-size: 0.9em; color: #666;">Click the link above to access your personal HMS collection online - no import needed!</p>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h5>üíæ Option 2: Local File Import</h5>
                            <ol>
                                <li><strong>Download Postman</strong> from <a href="https://www.postman.com" target="_blank">www.postman.com</a></li>
                                <li><strong>Open Postman</strong> and click "Import" ‚Üí Select "File"</li>
                                <li><strong>Choose File</strong>: <code>HMS-Postman-Collection.json</code></li>
                                <li><strong>Click "Import"</strong> ‚Üí Collection loads automatically</li>
                                <li><strong>Start Testing!</strong> All endpoints are pre-configured</li>
                            </ol>
                            <h4>üîó Collection File Location:</h4>
                            <div style="font-family: 'Courier New', monospace; background: #f8f9fa; padding: 15px; border-radius: 5px;">c:\Users\HP\HOSPITALMANAGEMENT\HMS-Postman-Collection.json</div>
                            <button class="btn" onclick="copyPostmanUrl()">üìã Copy File Path</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section">
                <h2>üìã System Response</h2>
                <div id="response" class="response-area">Welcome to HMS Full Database Integration! üéâ

üîπ Add doctors and patients through the web interface
üîπ All data is saved to the H2 database in real-time
üîπ Refresh buttons show current database state
üîπ Use the H2 Console to view raw database tables

üöÄ Your HMS College Project has full CRUD functionality!</div>
            </div>
        </div>
        <div class="footer">
            <p>üéì HMS College Project | Spring Boot + Spring Security + H2 Database</p>
            <p>üì± Full Database Integration | Interactive Doctor & Patient Management</p>
        </div>
    </div>

    <script>
        const API_BASE = "http://localhost:8081";
        let doctors = [];
        let patients = [];
        
        function showTab(tabName) {
            document.querySelectorAll(".tab-content").forEach(tab => { tab.classList.remove("active"); });
            document.querySelectorAll(".nav-tab").forEach(tab => { tab.classList.remove("active"); });
            document.getElementById(tabName).classList.add("active");
            event.target.classList.add("active");
            if (tabName === "doctors") { loadDoctors(); } 
            else if (tabName === "patients") { loadPatients(); }
        }
        
        async function testAPI(method, endpoint, body = null) {
            const responseDiv = document.getElementById("response");
            const startTime = Date.now();
            responseDiv.textContent = "üîÑ Testing " + method + " " + endpoint + "...\n";
            try {
                const options = { method: method, headers: { "Content-Type": "application/json" } };
                if (body && (method === "POST" || method === "PUT")) { options.body = JSON.stringify(body); }
                const response = await fetch(API_BASE + endpoint, options);
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                updateResponseTime(responseTime);
                
                let data;
                const contentType = response.headers.get("content-type");
                if (contentType && contentType.includes("application/json")) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }
                
                responseDiv.textContent = method + " " + endpoint + "\nStatus: " + response.status + "\nResponse Time: " + responseTime + "ms\nResponse: " + (typeof data === 'string' ? data : JSON.stringify(data, null, 2));
                if (response.status === 200 || response.status === 201) { 
                    showSuccessMessage("‚úÖ " + method + " " + endpoint + " successful!"); 
                } else { 
                    showErrorMessage("‚ö†Ô∏è " + method + " " + endpoint + " returned " + response.status);
                    if (response.status === 403) {
                        responseDiv.textContent += "\n\n‚ö†Ô∏è SECURITY ERROR: The server is still running with old security configuration.\n\nüîß SOLUTION:\n1. Stop the current server (close terminal window)\n2. Restart with: cd backend && mvn spring-boot:run\n3. Wait 30 seconds for full startup\n4. Try again";
                    }
                }
            } catch (error) {
                responseDiv.textContent = "‚ùå Error: " + error.message;
                showErrorMessage("‚ùå Failed to connect to server");
                updateServerStatus(false);
            }
        }
        
        async function addDoctor(event) {
            event.preventDefault();
            const name = document.getElementById("doctorName").value;
            const specialty = document.getElementById("doctorSpecialty").value;
            const licenseNumber = document.getElementById("doctorLicense").value;
            const yearsOfExperience = document.getElementById("doctorExperience").value;
            const doctorData = { name: name, specialty: specialty, licenseNumber: licenseNumber, yearsOfExperience: parseInt(yearsOfExperience) || 5 };
            try {
                const response = await fetch(API_BASE + "/api/doctors", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(doctorData) });
                let data;
                const contentType = response.headers.get("content-type");
                if (contentType && contentType.includes("application/json")) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }
                if (response.status === 200 || response.status === 201) {
                    showSuccessMessage("‚úÖ Doctor '" + name + "' added successfully!");
                    clearDoctorForm();
                    loadDoctors();
                    updateDoctorCount();
                    document.getElementById("response").textContent = "‚úÖ Doctor Added Successfully!\n\nName: " + name + "\nSpecialty: " + specialty + "\nLicense: " + licenseNumber + "\nExperience: " + yearsOfExperience + " years\n\nDatabase Response: " + (typeof data === 'string' ? data : JSON.stringify(data, null, 2));
                } else {
                    showErrorMessage("‚ùå Failed to add doctor: " + response.status);
                    let errorMsg = "‚ùå Error Adding Doctor\n\nStatus: " + response.status + "\nResponse: " + (typeof data === 'string' ? data : JSON.stringify(data, null, 2));
                    if (response.status === 403) {
                        errorMsg += "\n\n‚ö†Ô∏è SECURITY ERROR: Server needs restart!\n\nüîß STEPS:\n1. Close current server terminal\n2. Run: cd backend && mvn spring-boot:run\n3. Wait 30 seconds\n4. Try again";
                    }
                    document.getElementById("response").textContent = errorMsg;
                }
            } catch (error) {
                showErrorMessage("‚ùå Failed to add doctor: " + error.message);
                document.getElementById("response").textContent = "‚ùå Network Error: " + error.message + "\n\nPlease check if server is running and try again.";
            }
        }
        
        function displayDoctors() {
            const doctorsListDiv = document.getElementById("doctorsList");
            if (doctors.length === 0) {
                doctorsListDiv.innerHTML = "<div class='empty-state'><h4>No doctors in database</h4><p>Add your first doctor using the form on the left</p></div>";
                return;
            }
            let tableHTML = "<table class='data-table'><thead><tr><th>ID</th><th>Name</th><th>Specialty</th><th>License</th><th>Experience</th></tr></thead><tbody>";
            doctors.forEach(doctor => {
                tableHTML += "<tr><td>" + (doctor.id || '--') + "</td><td>" + (doctor.name || '--') + "</td><td>" + (doctor.specialty || '--') + "</td><td>" + (doctor.licenseNumber || '--') + "</td><td>" + (doctor.yearsOfExperience || '--') + " years</td></tr>";
            });
            tableHTML += "</tbody></table>";
            tableHTML += "<p><strong>Total Doctors:</strong> " + doctors.length + "</p>";
            doctorsListDiv.innerHTML = tableHTML;
        }
        
        function clearDoctorForm() { document.getElementById("doctorForm").reset(); }
        
        async function loadDoctors() {
            try {
                const response = await fetch(API_BASE + "/api/doctors");
                let data;
                const contentType = response.headers.get("content-type");
                if (contentType && contentType.includes("application/json")) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }
                if (response.status === 200) {
                    doctors = Array.isArray(data) ? data : [];
                    displayDoctors();
                    updateDoctorCount();
                } else {
                    showErrorMessage("‚ùå Failed to load doctors: " + response.status);
                    document.getElementById("doctorsList").innerHTML = "<div class='error-message'>Failed to load doctors: " + response.status + "</div>";
                }
            } catch (error) {
                showErrorMessage("‚ùå Network error: " + error.message);
                document.getElementById("doctorsList").innerHTML = "<div class='error-message'>Network error: " + error.message + "</div>";
            }
        }
        
        async function addPatient(event) {
            event.preventDefault();
            const name = document.getElementById("patientName").value;
            const email = document.getElementById("patientEmail").value;
            const phone = document.getElementById("patientPhone").value;
            const dateOfBirth = document.getElementById("patientDOB").value;
            const medicalHistory = document.getElementById("patientHistory").value;
            const patientData = { name: name, email: email, phone: phone, dateOfBirth: dateOfBirth || "1990-01-01", medicalHistory: medicalHistory || "No medical history recorded" };
            try {
                const response = await fetch(API_BASE + "/api/patients", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(patientData) });
                const data = await response.json();
                if (response.status === 200 || response.status === 201) {
                    showSuccessMessage("‚úÖ Patient '" + name + "' added successfully!");
                    clearPatientForm();
                    loadPatients();
                    updatePatientCount();
                    document.getElementById("response").textContent = "‚úÖ Patient Added Successfully!\n\nName: " + name + "\nEmail: " + email + "\nPhone: " + phone + "\nDOB: " + (dateOfBirth || "Not specified") + "\n\nDatabase Response: " + JSON.stringify(data, null, 2);
                } else {
                    showErrorMessage("‚ùå Failed to add patient: " + response.status);
                    document.getElementById("response").textContent = "‚ùå Error Adding Patient\n\nStatus: " + response.status + "\nResponse: " + JSON.stringify(data, null, 2);
                }
            } catch (error) {
                showErrorMessage("‚ùå Network error: " + error.message);
                document.getElementById("response").textContent = "‚ùå Network Error: " + error.message;
            }
        }
        
        async function loadPatients() {
            try {
                const response = await fetch(API_BASE + "/api/patients");
                const data = await response.json();
                if (response.status === 200) {
                    patients = Array.isArray(data) ? data : [];
                    displayPatients();
                    updatePatientCount();
                } else {
                    showErrorMessage("‚ùå Failed to load patients: " + response.status);
                    document.getElementById("patientsList").innerHTML = "<div class='error-message'>Failed to load patients: " + response.status + "</div>";
                }
            } catch (error) {
                showErrorMessage("‚ùå Network error: " + error.message);
                document.getElementById("patientsList").innerHTML = "<div class='error-message'>Network error: " + error.message + "</div>";
            }
        }
        
        function displayPatients() {
            const patientsListDiv = document.getElementById("patientsList");
            if (patients.length === 0) {
                patientsListDiv.innerHTML = "<div class='empty-state'><h4>No patients in database</h4><p>Add your first patient using the form on the left</p></div>";
                return;
            }
            let tableHTML = "<table class='data-table'><thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>DOB</th></tr></thead><tbody>";
            patients.forEach(patient => {
                tableHTML += "<tr><td>" + (patient.id || '--') + "</td><td>" + (patient.name || '--') + "</td><td>" + (patient.email || '--') + "</td><td>" + (patient.phone || '--') + "</td><td>" + (patient.dateOfBirth || '--') + "</td></tr>";
            });
            tableHTML += "</tbody></table>";
            tableHTML += "<p><strong>Total Patients:</strong> " + patients.length + "</p>";
            patientsListDiv.innerHTML = tableHTML;
        }
        
        function clearPatientForm() { document.getElementById("patientForm").reset(); }
        
        async function refreshAllData() {
            showInfoMessage("üîÑ Refreshing all data from database...");
            await Promise.all([loadDoctors(), loadPatients()]);
            showSuccessMessage("‚úÖ All data refreshed successfully!");
        }
        
        function updateDoctorCount() { document.getElementById("doctorCount").textContent = doctors.length; }
        function updatePatientCount() { document.getElementById("patientCount").textContent = patients.length; }
        function updateResponseTime(time) { document.getElementById("responseTime").textContent = time + "ms"; }
        
        function updateServerStatus(isOnline) {
            const serverStatus = document.getElementById("serverStatus");
            const connectionStatus = document.getElementById("connectionStatus");
            if (isOnline) {
                serverStatus.textContent = "üü¢";
                connectionStatus.className = "success-message";
                connectionStatus.innerHTML = "<strong>‚úÖ HMS Server is Online!</strong><br>Full database integration active. You can add doctors and patients through the web interface.";
            } else {
                serverStatus.textContent = "üî¥";
                connectionStatus.className = "error-message";
                connectionStatus.innerHTML = "<strong>‚ùå HMS Server is Offline!</strong><br>Please start the server with: mvn spring-boot:run";
            }
        }
        
        function showDatabaseInfo() {
            document.getElementById("response").textContent = "üóÑÔ∏è H2 Database Information\n\nConnection Details:\nJDBC URL: jdbc:h2:mem:hospitaldb\nUsername: sa\nPassword: (blank)\n\nAvailable Tables:\n- DOCTORS - Doctor information and credentials\n- PATIENTS - Patient medical records\n- USERS - User authentication data\n- ROLES - User roles (ADMIN, DOCTOR, CLERK, PATIENT)\n\nCurrent Statistics:\nDoctors: " + doctors.length + "\nPatients: " + patients.length + "\n\nüîó Click 'Open H2 Console' to access the database directly.";
        }
        
        function copyPostmanUrl() {
            const filePath = "c:\\Users\\HP\\HOSPITALMANAGEMENT\\HMS-Postman-Collection.json";
            navigator.clipboard.writeText(filePath).then(() => {
                showSuccessMessage("üìã Postman collection file path copied to clipboard!");
            }).catch(() => {
                showErrorMessage("‚ùå Failed to copy file path");
            });
        }
        
        function showSuccessMessage(message) { showNotification(message, "success"); }
        function showErrorMessage(message) { showNotification(message, "error"); }
        function showInfoMessage(message) { showNotification(message, "info"); }
        
        function showNotification(message, type) {
            const notification = document.createElement("div");
            notification.className = type + "-message";
            notification.textContent = message;
            notification.style.position = "fixed";
            notification.style.top = "20px";
            notification.style.right = "20px";
            notification.style.zIndex = "1000";
            notification.style.maxWidth = "300px";
            document.body.appendChild(notification);
            setTimeout(() => { notification.remove(); }, 3000);
        }
        
        window.onload = function() {
            testAPI("GET", "/api/v1/auth/status").then(() => {
                updateServerStatus(true);
                refreshAllData();
            }).catch(() => {
                updateServerStatus(false);
            });
        };
    </script>
</body>
</html>
